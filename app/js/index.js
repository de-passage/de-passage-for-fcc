// Generated by CoffeeScript 1.9.3
(function() {
  var app, body_parser, db, db_url, express, mongo, password, path, port, user;

  express = require('express');

  path = require('path');

  mongo = require('mongodb').MongoClient;

  body_parser = require('body-parser');

  app = express();

  port = process.env.PORT;

  user = process.env.DB_USER;

  password = process.env.DB_PASSWORD;

  db_url = "mongodb://" + user + ":" + password + "@ds149551.mlab.com:49551/all-things-fcc";

  db = null;

  app.set('views', 'app/views');

  app.set('view engine', 'pug');

  app.use(body_parser.json());

  app.use(body_parser.urlencoded({
    extended: true
  }));

  app.use('/styles', express["static"](path.join(__dirname, '../../public/styles')));

  app.get("/", function(req, res) {});

  mongo.connect(db_url, function(err, database) {
    if (err) {
      throw err;
    }
    db = database;
    console.log("Connected to database successfully");
    app.listen(port);
    return console.log("Listening to port " + port);
  });

}).call(this);
