// Generated by CoffeeScript 1.9.3
(function() {
  var drawChart;

  drawChart = function() {
    return $(".poll-results").each(function() {
      var chart, colors, data, poll_result;
      data = new google.visualization.DataTable();
      data.addColumn("string", "Option");
      data.addColumn("number", "Votes");
      colors = [];
      poll_result = $(this);
      poll_result.find(".option-result").each(function() {
        var name, option, vote;
        option = $(this);
        colors.push(option.find(".vote-color").html());
        name = option.find(".option-name").html();
        vote = parseInt(option.find(".vote-count").html(), 10);
        data.addRow([name, vote]);
        return option.hide();
      });
      chart = new google.visualization.PieChart(poll_result.find(".chart-div").get(0));
      return chart.draw(data, {
        height: Math.min(poll_result.width(), 500)
      });
    });
  };

  $(function() {
    google.charts.load("current", {
      packages: ['corechart']
    });
    return google.charts.setOnLoadCallback(drawChart);
  });

}).call(this);
