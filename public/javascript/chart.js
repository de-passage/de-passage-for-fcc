// Generated by CoffeeScript 1.9.3
(function() {
  var showChart;

  this.drawChart = function(data, container, colors) {
    var chart, width;
    chart = new google.visualization.PieChart(container.find(".chart-div").get(0));
    width = container.width();
    return chart.draw(data, {
      height: Math.max(container.width(), 250),
      width: Math.max(container.width(), 300),
      sliceVisibilityThreshold: 0,
      colors: colors,
      legend: !window.hideChartLegend ? null : 'none',
      tooltip: {
        textStyle: {
          fontSize: 16
        }
      },
      chartArea: {
        width: '90%',
        height: '90%'
      }
    });
  };

  showChart = function(data) {
    return $(".poll-results").each(function() {
      var colors, poll_result;
      data = new google.visualization.DataTable();
      data.addColumn("string", "Option");
      data.addColumn("number", "Votes");
      colors = [];
      poll_result = $(this);
      poll_result.find(".option-result").each(function() {
        var name, option, vote;
        option = $(this);
        colors.push(option.find(".vote-color").html());
        name = option.find(".option-name").html();
        vote = parseInt(option.find(".vote-count").html(), 10);
        data.addRow([name, vote]);
        return option.hide();
      });
      return window.drawChart(data, poll_result, colors);
    });
  };

  $(function() {
    google.charts.load("current", {
      packages: ['corechart']
    });
    return google.charts.setOnLoadCallback(showChart);
  });

}).call(this);
